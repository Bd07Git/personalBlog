# 闭包 (Closure)

## 1. 定义
闭包是指**有权访问另一个函数作用域中变量的函数**。在 JavaScript 中，闭包在函数创建时即产生。

简单来说：**闭包 = 函数 + 自由变量**。

## 2. 核心原理
当外部函数执行完毕后，其执行上下文本应被销毁，但如果内部函数引用了外部函数的变量，这些变量会保存在内存中，不会被垃圾回收机制回收。

```javascript
function outer() {
  let count = 0;
  return function inner() {
    count++;
    console.log(count);
  }
}

const counter = outer();
counter(); // 1
counter(); // 2
```

## 3. 应用场景
1. **封装私有变量**：避免全局污染。
2. **柯里化 (Currying)**：参数复用。
3. **防抖与节流**：内部维护一个定时器变量。
4. **模块化**：在立即执行函数 (IIFE) 中导出特定接口。

## 4. 优缺点
- **优点**：可以读取函数内部的变量，让这些变量的值始终保持在内存中。
- **缺点**：由于变量不会被自动回收，过度使用闭包会导致**内存泄漏**。

## 5. 如何解决内存泄漏？
在退出函数之前，将不使用的局部变量显式设置为 `null`。